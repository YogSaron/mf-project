<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.company.project.dao.SysOutOrderDetailMapper">
  <resultMap id="BaseResultMap" type="com.company.project.model.SysOutOrderDetail">
    <!--
      WARNING - @mbg.generated
    -->
    <id column="id" jdbcType="INTEGER" property="id" />
    <result column="order_id" jdbcType="INTEGER" property="orderId" />
    <result column="model" jdbcType="VARCHAR" property="model" />
    <result column="packaging" jdbcType="VARCHAR" property="packaging" />
    <result column="quantity" jdbcType="VARCHAR" property="quantity" />
    <result column="unit_price" jdbcType="DECIMAL" property="unitPrice" />
    <result column="aggregate" jdbcType="DECIMAL" property="aggregate" />
    <result column="backup1" jdbcType="VARCHAR" property="backup1" />
  </resultMap>

  <select id="getPayable" resultType="DECIMAL">
    select SUM(case when flag=2 then total_amount*(-1) else total_amount end ) from sys_out_order
    <where>
      <if test="startDate != null and startDate.trim() != ''">
          `delivery_date` <![CDATA[ > ]]> #{startDate,jdbcType=DATE}
      </if>
      <if test="endDate != null and endDate.trim() != ''">
          `delivery_date` <![CDATA[ <= ]]> #{endDate,jdbcType=DATE}
      </if>
      and id
    </where>
  </select>
</mapper>